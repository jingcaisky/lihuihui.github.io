<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPGèµ„æºç®¡ç†å™¨ - å›¾ç‰‡é¢„è§ˆç»„ä»¶æ¼”ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e8e8e8;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #00d4ff;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #00ff88;
            font-size: 1.1rem;
        }

        /* èµ„æºç½‘æ ¼å¸ƒå±€ */
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        /* èµ„æºå¡ç‰‡æ ·å¼ */
        .resource-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .resource-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 212, 255, 0.3);
            border-color: #00d4ff;
        }

        /* ç¼©ç•¥å›¾å®¹å™¨ */
        .thumbnail-container {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
        }

        /* æ‡’åŠ è½½å›¾ç‰‡æ ·å¼ */
        .thumbnail-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
            opacity: 0;
            transform: scale(1.1);
        }

        .thumbnail-image.loaded {
            opacity: 1;
            transform: scale(1);
        }

        /* åŠ è½½å ä½ç¬¦ */
        .thumbnail-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: #666;
            font-size: 48px;
            transition: opacity 0.3s ease;
        }

        .thumbnail-placeholder.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(0, 212, 255, 0.3);
            border-top: 3px solid #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* é¢„è§ˆæŒ‰é’® */
        .preview-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(0, 0, 0, 0.7);
            color: #00d4ff;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            cursor: pointer;
            opacity: 0;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .resource-card:hover .preview-btn {
            opacity: 1;
        }

        .preview-btn:hover {
            background: rgba(0, 212, 255, 0.2);
            transform: scale(1.05);
        }

        /* èµ„æºä¿¡æ¯ */
        .resource-info {
            padding: 20px;
        }

        .resource-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #e8e8e8;
        }

        .resource-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 12px;
        }

        .meta-tag {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .license-tag {
            background: rgba(0, 255, 136, 0.2);
            color: #00ff88;
            border-color: rgba(0, 255, 136, 0.3);
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            position: relative;
            max-width: 90vw;
            max-height: 90vh;
            background: rgba(26, 26, 46, 0.95);
            border-radius: 16px;
            overflow: hidden;
            transform: scale(0.8);
            transition: transform 0.3s ease;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .modal-overlay.active .modal-content {
            transform: scale(1);
        }

        .modal-image {
            width: 100%;
            height: auto;
            max-height: 70vh;
            object-fit: contain;
            display: block;
        }

        .modal-info {
            padding: 24px;
            background: rgba(0, 0, 0, 0.5);
        }

        .modal-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #00d4ff;
        }

        .modal-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 16px;
        }

        .modal-tag {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid rgba(0, 212, 255, 0.3);
        }

        .modal-description {
            color: #ccc;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn-primary {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
        }

        .modal-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e8e8e8;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .close-btn {
            position: absolute;
            top: 16px;
            right: 16px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .close-btn:hover {
            background: rgba(255, 0, 0, 0.7);
            transform: scale(1.1);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .resource-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
                gap: 16px;
            }
            
            .modal-content {
                max-width: 95vw;
                max-height: 95vh;
            }
            
            .modal-info {
                padding: 16px;
            }
            
            .modal-title {
                font-size: 20px;
            }
        }

        /* å›¾ç‰‡åŠ è½½é”™è¯¯æ ·å¼ */
        .thumbnail-error {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            text-align: center;
            padding: 20px;
        }

        /* å›¾ç‰‡ç¼©æ”¾æ•ˆæœ */
        .thumbnail-container:hover .thumbnail-image {
            transform: scale(1.05);
        }

        /* è¿›åº¦æ¡ */
        .loading-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, #00d4ff, #00ff88);
            transition: width 0.3s ease;
            width: 0%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ® RPGèµ„æºç®¡ç†å™¨ v2.0</h1>
            <p>å›¾ç‰‡é¢„è§ˆç»„ä»¶æ¼”ç¤º - æ”¯æŒæ‡’åŠ è½½ã€æ¨¡æ€æ¡†å±•ç¤ºã€å“åº”å¼å¸ƒå±€</p>
        </div>

        <div class="resource-grid" id="resourceGrid">
            <!-- èµ„æºå¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div class="modal-overlay" id="imageModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">&times;</button>
            <img class="modal-image" id="modalImage" src="" alt="">
            <div class="modal-info">
                <h2 class="modal-title" id="modalTitle"></h2>
                <div class="modal-meta" id="modalMeta"></div>
                <p class="modal-description" id="modalDescription"></p>
                <div class="modal-actions">
                    <button class="modal-btn modal-btn-primary" onclick="downloadResource()">ä¸‹è½½èµ„æº</button>
                    <button class="modal-btn modal-btn-secondary" onclick="addToFavorites()">æ·»åŠ åˆ°æ”¶è—</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸAPIæ•°æ®
        const mockResources = [
            {
                id: 1,
                title: 'å¥‡å¹»æˆ˜å£«è§’è‰²',
                thumbnail_url: 'https://picsum.photos/400/300?random=1',
                detail_url: 'https://picsum.photos/800/600?random=1',
                size: '15.2MB',
                format: 'FBX',
                platform: 'OpenGameArt',
                license: 'CC0',
                category: 'è§’è‰²ç±»',
                description: 'ä¸€ä¸ªé«˜è´¨é‡çš„å¥‡å¹»æˆ˜å£«è§’è‰²æ¨¡å‹ï¼ŒåŒ…å«å®Œæ•´çš„éª¨éª¼ç»‘å®šå’ŒåŠ¨ç”»ã€‚é€‚åˆRPGæ¸¸æˆä½¿ç”¨ã€‚',
                author: 'GameArtist123',
                downloads: 1250,
                rating: 4.2
            },
            {
                id: 2,
                title: 'ç°ä»£å¥³æ€§è§’è‰²',
                thumbnail_url: 'https://picsum.photos/400/300?random=2',
                detail_url: 'https://picsum.photos/800/600?random=2',
                size: '18.5MB',
                format: 'FBX',
                platform: 'Sketchfab',
                license: 'CC-BY',
                category: 'è§’è‰²ç±»',
                description: 'ç°ä»£é£æ ¼çš„å¥³æ€§è§’è‰²æ¨¡å‹ï¼Œé€‚åˆç°ä»£æ¸¸æˆä½¿ç”¨ã€‚åŒ…å«å¤šç§æœè£…å’Œè¡¨æƒ…ã€‚',
                author: 'ModernArtist',
                downloads: 2100,
                rating: 4.4
            },
            {
                id: 3,
                title: 'å¡é€šç”·å­©è§’è‰²',
                thumbnail_url: 'https://picsum.photos/400/300?random=3',
                detail_url: 'https://picsum.photos/800/600?random=3',
                size: '12.3MB',
                format: 'FBX',
                platform: 'OpenGameArt',
                license: 'CC0',
                category: 'è§’è‰²ç±»',
                description: 'å¯çˆ±çš„å¡é€šé£æ ¼ç”·å­©è§’è‰²æ¨¡å‹ï¼Œé€‚åˆä¼‘é—²æ¸¸æˆå’Œå„¿ç«¥æ¸¸æˆã€‚',
                author: 'CartoonMaster',
                downloads: 1800,
                rating: 4.1
            },
            {
                id: 4,
                title: 'æœºå™¨äººè§’è‰²',
                thumbnail_url: 'https://picsum.photos/400/300?random=4',
                detail_url: 'https://picsum.photos/800/600?random=4',
                size: '25.7MB',
                format: 'FBX',
                platform: 'Sketchfab',
                license: 'CC-BY',
                category: 'è§’è‰²ç±»',
                description: 'æœªæ¥ç§‘å¹»é£æ ¼çš„æœºå™¨äººè§’è‰²æ¨¡å‹ï¼ŒåŒ…å«å‘å…‰æ•ˆæœå’Œæœºæ¢°åŠ¨ç”»ã€‚',
                author: 'SciFiCreator',
                downloads: 1500,
                rating: 4.6
            },
            {
                id: 5,
                title: 'å¤ä»£æ­¦å£«',
                thumbnail_url: 'https://picsum.photos/400/300?random=5',
                detail_url: 'https://picsum.photos/800/600?random=5',
                size: '20.1MB',
                format: 'FBX',
                platform: 'Kenney.nl',
                license: 'CC0',
                category: 'è§’è‰²ç±»',
                description: 'å¤ä»£æ­¦å£«è§’è‰²æ¨¡å‹ï¼ŒåŒ…å«ä¼ ç»Ÿæœè£…å’Œæ­¦å™¨ã€‚é€‚åˆå†å²é¢˜ææ¸¸æˆã€‚',
                author: 'Kenney',
                downloads: 2200,
                rating: 4.7
            },
            {
                id: 6,
                title: 'ä¸­ä¸–çºªé•¿å‰‘',
                thumbnail_url: 'https://picsum.photos/400/300?random=6',
                detail_url: 'https://picsum.photos/800/600?random=6',
                size: '4.7MB',
                format: 'Blend',
                platform: 'Kenney.nl',
                license: 'CC0',
                category: 'æ­¦å™¨ç±»',
                description: 'ç²¾ç¾çš„ä¸­ä¸–çºªé£æ ¼é•¿å‰‘æ¨¡å‹ï¼Œé€‚åˆRPGæ¸¸æˆä½¿ç”¨ã€‚åŒ…å«å¤šç§æè´¨ã€‚',
                author: 'Kenney',
                downloads: 2100,
                rating: 4.8
            },
            {
                id: 7,
                title: 'çŸ³è´¨åŸå ¡',
                thumbnail_url: 'https://picsum.photos/400/300?random=7',
                detail_url: 'https://picsum.photos/800/600?random=7',
                size: '32.1MB',
                format: 'OBJ',
                platform: 'PolyHaven',
                license: 'CC-BY',
                category: 'ç¯å¢ƒç±»',
                description: 'å®ä¼Ÿçš„çŸ³è´¨åŸå ¡å»ºç­‘æ¨¡å‹ï¼ŒåŒ…å«è¯¦ç»†çš„çº¹ç†å’Œæè´¨ã€‚',
                author: 'PolyHaven',
                downloads: 890,
                rating: 4.5
            },
            {
                id: 8,
                title: 'é­”æ³•æ³•æ–',
                thumbnail_url: 'https://picsum.photos/400/300?random=8',
                detail_url: 'https://picsum.photos/800/600?random=8',
                size: '8.9MB',
                format: 'FBX',
                platform: 'OpenGameArt',
                license: 'CC-BY',
                category: 'æ­¦å™¨ç±»',
                description: 'ç¥ç§˜çš„é­”æ³•æ³•æ–æ¨¡å‹ï¼Œå¸¦æœ‰å‘å…‰æ•ˆæœå’Œç²’å­ç³»ç»Ÿã€‚',
                author: 'MagicCreator',
                downloads: 1560,
                rating: 4.1
            }
        ];

        let currentResource = null;

        // å›¾ç‰‡æ‡’åŠ è½½ç±»
        class LazyImageLoader {
            constructor() {
                this.imageObserver = null;
                this.initIntersectionObserver();
            }

            initIntersectionObserver() {
                if ('IntersectionObserver' in window) {
                    this.imageObserver = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                this.loadImage(entry.target);
                                this.imageObserver.unobserve(entry.target);
                            }
                        });
                    }, {
                        rootMargin: '50px 0px',
                        threshold: 0.1
                    });
                }
            }

            observeImage(imgElement) {
                if (this.imageObserver) {
                    this.imageObserver.observe(imgElement);
                } else {
                    // é™çº§å¤„ç†ï¼šç›´æ¥åŠ è½½å›¾ç‰‡
                    this.loadImage(imgElement);
                }
            }

            loadImage(imgElement) {
                const src = imgElement.dataset.src;
                const placeholder = imgElement.parentElement.querySelector('.thumbnail-placeholder');
                const progressBar = imgElement.parentElement.querySelector('.loading-progress');

                if (!src) return;

                // æ˜¾ç¤ºåŠ è½½è¿›åº¦
                if (progressBar) {
                    progressBar.style.width = '30%';
                }

                const img = new Image();
                img.onload = () => {
                    imgElement.src = src;
                    imgElement.classList.add('loaded');
                    
                    if (placeholder) {
                        placeholder.classList.add('hidden');
                    }
                    
                    if (progressBar) {
                        progressBar.style.width = '100%';
                        setTimeout(() => {
                            progressBar.style.opacity = '0';
                        }, 300);
                    }
                };

                img.onerror = () => {
                    if (placeholder) {
                        placeholder.innerHTML = '<div class="thumbnail-error">å›¾ç‰‡åŠ è½½å¤±è´¥</div>';
                    }
                    if (progressBar) {
                        progressBar.style.display = 'none';
                    }
                };

                img.src = src;
            }
        }

        // åˆå§‹åŒ–æ‡’åŠ è½½å™¨
        const lazyLoader = new LazyImageLoader();

        // åˆ›å»ºèµ„æºå¡ç‰‡
        function createResourceCard(resource) {
            return `
                <div class="resource-card" onclick="openModal(${resource.id})">
                    <div class="thumbnail-container">
                        <img class="thumbnail-image" 
                             data-src="${resource.thumbnail_url}" 
                             alt="${resource.title}"
                             loading="lazy">
                        <div class="thumbnail-placeholder">
                            <div class="loading-spinner"></div>
                        </div>
                        <div class="loading-progress"></div>
                        <button class="preview-btn" onclick="event.stopPropagation(); openModal(${resource.id})">
                            ğŸ‘ï¸ é¢„è§ˆ
                        </button>
                    </div>
                    <div class="resource-info">
                        <h3 class="resource-title">${resource.title}</h3>
                        <div class="resource-meta">
                            <span class="meta-tag">${resource.size}</span>
                            <span class="meta-tag">${resource.format}</span>
                            <span class="meta-tag">${resource.platform}</span>
                            <span class="meta-tag license-tag">${resource.license}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        // æ¸²æŸ“èµ„æºç½‘æ ¼
        function renderResourceGrid() {
            const grid = document.getElementById('resourceGrid');
            grid.innerHTML = mockResources.map(createResourceCard).join('');

            // åˆå§‹åŒ–æ‡’åŠ è½½
            const images = grid.querySelectorAll('.thumbnail-image');
            images.forEach(img => {
                lazyLoader.observeImage(img);
            });
        }

        // æ‰“å¼€æ¨¡æ€æ¡†
        function openModal(resourceId) {
            const resource = mockResources.find(r => r.id === resourceId);
            if (!resource) return;

            currentResource = resource;

            // è®¾ç½®æ¨¡æ€æ¡†å†…å®¹
            document.getElementById('modalImage').src = resource.detail_url;
            document.getElementById('modalTitle').textContent = resource.title;
            document.getElementById('modalDescription').textContent = resource.description;

            // è®¾ç½®å…ƒæ•°æ®
            const modalMeta = document.getElementById('modalMeta');
            modalMeta.innerHTML = `
                <span class="modal-tag">${resource.size}</span>
                <span class="modal-tag">${resource.format}</span>
                <span class="modal-tag">${resource.platform}</span>
                <span class="modal-tag license-tag">${resource.license}</span>
                <span class="modal-tag">â˜… ${resource.rating}</span>
                <span class="modal-tag">â¬‡ï¸ ${resource.downloads}</span>
            `;

            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            const modal = document.getElementById('imageModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            currentResource = null;
        }

        // ä¸‹è½½èµ„æº
        function downloadResource() {
            if (currentResource) {
                alert(`å¼€å§‹ä¸‹è½½: ${currentResource.title}`);
                // è¿™é‡Œå¯ä»¥é›†æˆå®é™…çš„ä¸‹è½½é€»è¾‘
            }
        }

        // æ·»åŠ åˆ°æ”¶è—
        function addToFavorites() {
            if (currentResource) {
                alert(`å·²æ·»åŠ åˆ°æ”¶è—: ${currentResource.title}`);
                // è¿™é‡Œå¯ä»¥é›†æˆå®é™…çš„æ”¶è—é€»è¾‘
            }
        }

        // é”®ç›˜äº‹ä»¶å¤„ç†
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
        document.getElementById('imageModal').addEventListener('click', (e) => {
            if (e.target === e.currentTarget) {
                closeModal();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆåæ¸²æŸ“
        document.addEventListener('DOMContentLoaded', () => {
            renderResourceGrid();
        });

        // æ¨¡æ‹Ÿä»åç«¯APIè·å–æ•°æ®
        async function fetchResourcesFromAPI() {
            try {
                // è¿™é‡Œå¯ä»¥æ›¿æ¢ä¸ºå®é™…çš„APIè°ƒç”¨
                // const response = await fetch('/api/resources');
                // const data = await response.json();
                // return data;
                
                // æ¨¡æ‹ŸAPIå»¶è¿Ÿ
                await new Promise(resolve => setTimeout(resolve, 1000));
                return mockResources;
            } catch (error) {
                console.error('è·å–èµ„æºæ•°æ®å¤±è´¥:', error);
                return [];
            }
        }

        // åˆ·æ–°èµ„æºæ•°æ®
        async function refreshResources() {
            const resources = await fetchResourcesFromAPI();
            // æ›´æ–°èµ„æºç½‘æ ¼
            renderResourceGrid();
        }
    </script>
</body>
</html>
